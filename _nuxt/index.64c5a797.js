import{a as y,o as d,b as h,r as v,f as D,e as l,t as u,h as f,F as S,i as x,j as I,k as w,l as B,m as p,w as C,p as b}from"./entry.4c5ce6e2.js";import{_ as E}from"./app.config.0a32ef7e.js";const G={};function M(e,t){return d(),h("span",null,[v(e.$slots,"default")])}const k=y(G,[["render",M]]);const m={name:"Dice",props:{},components:{},data(){return{useBGmap:!1,currentInteraction:null,sensors:{permission:!1,gyro:!1,orientation:!1,gyrocoords:{tilt:null,turn:null,rotate:null}},DiceState:{face:6,spinning:!1,accelerometer:[.3,.25],hasRolled:!1},Die:{faces:{front:{orientation:[0,0,0],image:null},back:{orientation:[90,0,0],image:null},top:{orientation:[0,90,0],image:null},bottom:{orientation:[0,-90,0],image:null},left:{orientation:[-90,0,0],image:null},right:{orientation:[-180,0,0],image:null}}},faceViews:[[0,0,0],[90,0,0],[0,90,0],[0,-90,0],[-90,0,0],[-180,0,0]],dummyImages:["dummy-400x400-BodyLanguage.jpg","dummy-400x400-CharlesBaudelaire.jpg","dummy-400x400-Eye.jpg","dummy-400x400-HappyBoy.jpg","dummy-400x400-Headphone.jpg","dummy-400x400-TShirt.jpg"],mouseTouchCoords:[0,0]}},mounted(){document.addEventListener("keydown",e=>{this.handleKeyDown(e)}),document.addEventListener("mousemove",e=>{let t=(window.innerWidth/2-e.pageX)/-5,s=(window.innerHeight/2-e.pageY)/5;this.mouseTouchCoords=[t,s],this.currentInteraction="mouse"}),document.addEventListener("touchmove",e=>{let t=typeof e.originalEvent>"u"?e:e.originalEvent,s=t.touches[0]||t.changedTouches[0],i=s.pageX,n=s.pageY;this.mouseTouchCoords=[i,n],this.currentInteraction="touch"}),typeof DeviceOrientationEvent.requestPermission=="function"?this.reqPermissionMotion():this.setMotionListeners()},methods:{setMotionListeners(){if(window.RelativeOrientationSensor){const e=new window.RelativeOrientationSensor({frequency:60,referenceFrame:"screen"});this.sensors.orientation=!0,e.addEventListener("reading",()=>{console.log("orientationSensor reading"),this.DiceState.spinning||(this.currentInteraction="sensor",this.DiceState.accelerometer=e.quaternion.map((t,s)=>{if(s<2)return Math.round(t*1e3*1e3)/(1e3*1e3)}))}),e.start()}else window.addEventListener("deviceorientation",e=>{console.log("legacy deviceorientation reading"),this.currentInteraction="sensor";let t=e.beta,s=e.alpha,i=e.gamma;if(!this.DiceState.spinning){const n=t/180,o=i/90;this.DiceState.accelerometer=[n,o]}this.sensors.gyrocoords.tilt=t.toFixed(2),this.sensors.gyrocoords.turn=s.toFixed(2),this.sensors.gyrocoords.rotate=i.toFixed(2),(t>60||i>50)&&!this.DiceState.spinning&&this.random()});try{if(window.Gyroscope){const e=new Gyroscope({frequency:60});this.sensors.gyro=!0,e.addEventListener("reading",()=>{console.log("gyroscope reading"),this.sensors.gyrocoords.x=e.x,this.sensors.gyrocoords.y=e.z,(e.x>9||e.z>4)&&!this.DiceState.spinning&&this.random()}),e.start()}}catch{}},handleKeyDown(e){console.log("func handleKeyDown %O",e),e.code==="Space"&&this.random()},handleClick(){console.log("func handleClick()"),this.random()},random(){console.log("func random()"),this.roll(Math.floor(Math.random()*6+1))},roll(e){console.log("func roll(), face: %O",e),this.DiceState.face=e,this.DiceState.spinning=!0,this.DiceState.hasRolled=!0,setTimeout(()=>{this.DiceState.spinning=!1},2e3)},getRandom(e,t){return(Math.floor(Math.random()*(e-t))+t)*90},reqPermissionMotion(){typeof DeviceOrientationEvent.requestPermission=="function"&&DeviceOrientationEvent.requestPermission().then(e=>{e==="granted"?(this.sensors.permission=!0,this.setMotionListeners()):this.sensors.permission="noooo"}).catch(e=>{console.log("Error getting sensor permission: %O",e)})}},computed:{diceBG_BorderRadius(){return this.DiceState.spinning?"50%":"10px"},diceBG_Shadow(){return this.DiceState.spinning?"blur(80px)":"blur(20px)"},diceBG_transform(){return"translateZ("+(this.DiceState.spinning?"-50":"0")+"px) translate3d( 0, 0, 0)"},cubeTransformSpinning(){const[e,t,s]=this.faceViews[this.DiceState.face-1];return"rotateX("+e+"deg) rotateY("+t+"deg) rotateZ("+s+"deg) translate3d( 0, 0, 0)"},cubeTransformPerspective(){const[e,t,s]=this.faceViews[this.DiceState.face-1],[i,n]=this.currentInteraction=="sensor"?this.DiceState.accelerometer:this.mouseTouchCoords;let o=.002,r=0,a=0,c=0;if(this.DiceState.face===1?this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(a=e+o*(i*40),r=t+o*(n*40),c=s):this.currentInteraction=="sensor"&&(r=e+i*40,a=t+-n*40,c=s):this.DiceState.face===2?this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(a=e+o*(i*40),r=t,c=s+o*(n*40)):this.currentInteraction=="sensor"&&(r=e+i*40,a=t,c=s+n*40):this.DiceState.face===3?this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(r=t+o*(n*40),a=s,c=e+o*(-i*40)):this.currentInteraction=="sensor"&&(r=e+i*40,a=t+-n*40,c=s):this.DiceState.face===4?this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(r=t+o*(n*40),a=s,c=e+o*(i*40)):this.currentInteraction=="sensor"&&(r=e+i*40,a=t+-n*40,c=s):this.DiceState.face===5?this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(r=t,a=e+o*(i*40),c=s+o*(-n*40)):this.currentInteraction=="sensor"&&(r=e+i*40,a=t,c=s+o*(-n*40)):this.DiceState.face===6&&(this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(r=t+o*(n*40),a=e+o*(i*40),c=s):this.currentInteraction=="sensor"&&(r=e+i*40,a=t+n*40,c=s)),this.currentInteraction=="mouse"||this.currentInteraction=="sensor")return"rotateX("+r+"deg) rotateY("+a+"deg) rotateZ("+c+"deg) translate3d( 0, 0, 0)";if(this.currentInteraction=="touch")return"rotateX("+-r+"deg) rotateY("+-a+"deg) rotateZ("+c+"deg) translate3d( 0, 0, 0)"}}},g=()=>{D(e=>({"2436359a":e.diceBG_Shadow,"9b7e649e":e.diceBG_BorderRadius,"3cad0299":e.diceBG_transform,cb7776f6:e.cubeTransformPerspective}))},_=m.setup;m.setup=_?(e,t)=>(g(),_(e,t)):g;const T=m,L={class:"w-full h-full flex flex-col justify-center items-center"},j={class:"w-full my-8 overflow-hidden"},q={class:"whitespace-nowrap"};function P(e,t,s,i,n,o){return d(),h("div",L,[l("div",j,[l("div",{onClick:t[0]||(t[0]=(...r)=>o.reqPermissionMotion&&o.reqPermissionMotion(...r)),class:"p-2 bg-gray-200 cursor-pointer"},"Sensor Permission"),l("div",null,"Dice face: "+u(n.DiceState.face),1),l("div",null,"Dice spinning: "+u(n.DiceState.spinning),1),l("div",null,"Use bg map: "+u(n.useBGmap),1),l("div",null,"currentInteraction: "+u(n.currentInteraction),1),l("div",q,"sensors: "+u(n.sensors.gyrocoords),1)]),l("div",{onClick:t[1]||(t[1]=r=>o.handleClick()),class:f(["dice cursor-pointer",[n.DiceState.spinning?"spin":"perspective",{useBGmap:n.useBGmap}]])},[l("div",{class:f([n.DiceState.spinning?"spin":"perspective","cube"])},[(d(!0),h(S,null,x(n.Die.faces,(r,a,c)=>(d(),h("div",{key:"face-"+c,class:f([a,n.DiceState.face===c+1||n.DiceState.spinning?"lightFacing":""]),style:I(n.useBGmap?"":"background-image: url(images/"+n.dummyImages[c]+")")},null,6))),128))],2)],2)])}const O=y(T,[["render",P],["__scopeId","data-v-118af60a"]]);function V(){const e=w();return e._appConfig||(e._appConfig=B(E)),e._appConfig}const z={class:"w-full h-full flex flex-col justify-center items-center"},F=l("h1",{class:"text-3xl font-bold underline"},"Welcome to the homepage",-1),Y={__name:"index",setup(e){return V(),(t,s)=>{const i=k,n=O;return d(),h("div",z,[F,p(i,null,{default:C(()=>[b(" This is an auto-imported component. ")]),_:1}),p(n)])}}};export{Y as default};
