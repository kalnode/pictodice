import{r as D,_ as f,e as v,f as S,o as h,a as m,b as r,h as p,t as d,F as y,i as w,j as g,k as b,u as _,p as E,l as x,m as P}from"./entry.832292f3.js";import{_ as R}from"./_plugin-vue_export-helper.c27b6911.js";const I=D("Motion",{android:()=>f(()=>import("./web.81d78f35.js"),["./web.81d78f35.js","./entry.832292f3.js","./entry.339befa1.css"],import.meta.url).then(e=>new e.MotionWeb),ios:()=>f(()=>import("./web.81d78f35.js"),["./web.81d78f35.js","./entry.832292f3.js","./entry.339befa1.css"],import.meta.url).then(e=>new e.MotionWeb),web:()=>f(()=>import("./web.81d78f35.js"),["./web.81d78f35.js","./entry.832292f3.js","./entry.339befa1.css"],import.meta.url).then(e=>new e.MotionWeb)});const L=e=>(E("data-v-6f0ffaf7"),e=e(),x(),e),T={class:"w-full h-full flex flex-col justify-center items-center"},k={key:0,class:"flex justify-center space-x-2 items-center absolute top-4 mt-12 mx-4 z-50 pointer-events-auto bg-yellow-200 text-xs p-2 text-orange-800"},M=L(()=>r("div",null,"It's better with motion sensors enabled",-1)),B={key:1,class:"w-full my-8 overflow-hidden"},F={class:"whitespace-nowrap"},C={class:"absolute bottom-4"},O={id:"dieInner",class:"cube"},j={name:"Dice",props:{},components:{},data(){return{showDevTools:!1,showSensorPermissionExperience:!1,hasInteracted:!1,useBGmap:!1,DiceState:{face:1,spinning:!1,accelerometer:[0,0],hasRolled:!1},Die:{faces:[{name:"front",orientation:[0,0,0],image:null},{name:"back",orientation:[90,0,0],image:null},{name:"top",orientation:[0,90,0],image:null},{name:"bottom",orientation:[0,-90,0],image:null},{name:"left",orientation:[-90,0,0],image:null},{name:"right",orientation:[-180,0,0],image:null}]},dummyImages:["dummy-400x400-BodyLanguage.jpg","dummy-400x400-CharlesBaudelaire.jpg","dummy-400x400-Eye.jpg","dummy-400x400-HappyBoy.jpg","dummy-400x400-Headphone.jpg","dummy-400x400-TShirt.jpg"],faceViews:[[0,0,0],[90,0,0],[0,90,0],[0,-90,0],[-90,0,0],[-180,0,0]],accelerationHandler:null,orientationHandler:null,currentInteraction:null,mouseTouchCoords:[1,1],sensors:{permission:!1,gyro:!1,orientation:!1,gyrocoords:{tilt:null,turn:null,rotate:null}},devOutput_motionEvent:null}},async mounted(){document.getElementById("dieParent").addEventListener("animationend",()=>{this.DiceState.spinning=!1}),document.addEventListener("keydown",i=>{this.handleKeyDown(i)}),document.addEventListener("mousemove",i=>{if(this.hasInteracted||(this.hasInteracted=!0),!this.currentInteraction!="sensor"){let t=(window.innerWidth/2-i.pageX)/-5,n=(window.innerHeight/2-i.pageY)/5;this.mouseTouchCoords=[t,n],this.currentInteraction="mouse"}}),document.addEventListener("touchmove",i=>{if(this.hasInteracted||(this.hasInteracted=!0),this.currentInteraction!="sensor"){let t=typeof i.originalEvent>"u"?i:i.originalEvent,n=t.touches[0]||t.changedTouches[0],o=n.pageX,s=n.pageY;this.mouseTouchCoords=[o,s],this.currentInteraction="touch"}}),await this.checkMotionPermission()},methods:{handleKeyDown(e){e.code==="Space"&&this.getRandomDieFace()},handleClick(){this.getRandomDieFace()},getRandomDieFace(){this.rollToFace(Math.floor(Math.random()*6+1))},rollToFace(e){this.DiceState.face=e,this.DiceState.spinning=!0,this.DiceState.hasRolled=!0},async checkMotionPermission(){window.DeviceOrientationEvent&&typeof window.DeviceOrientationEvent.requestPermission=="function"?await window.DeviceOrientationEvent.requestPermission().then(e=>{e=="granted"&&(this.showSensorPermissionExperience=!1,this.setMotionListeners())}).catch(e=>{console.log("Error getting sensor permission: %O",e),this.showSensorPermissionExperience=!0}):this.setMotionListeners()},async setMotionListeners(){this.orientationHandler=await I.addListener("orientation",e=>{if(this.hasInteracted||(this.hasInteracted=!0),this.devOutput_motionEvent={x:e.alpha.toFixed(2),y:e.beta.toFixed(2),z:e.gamma.toFixed(2)},this.currentInteraction="sensor",!this.DiceState.spinning){let i=e.beta;e.alpha;let t=e.gamma;const n=i/180,o=t/90;this.DiceState.accelerometer=[n,o]}}),this.accelerationHandler=await I.addListener("accel",e=>{this.hasInteracted||(this.hasInteracted=!0),this.devOutput_motionEvent={x:e.rotationRate.alpha.toFixed(2),y:e.rotationRate.beta.toFixed(2),z:e.rotationRate.gamma.toFixed(2)},this.currentInteraction="sensor",(e.rotationRate.alpha>256||e.rotationRate.beta>256||e.rotationRate.gamma>256)&&!this.DiceState.spinning&&this.getRandomDieFace()})},stopMotionListeners(){},destroyListeners(){},setMotionListenersEXPERIMENTAL(){}},computed:{css_dieShadow_BorderRadius(){return this.DiceState.spinning?"50%":"10px"},css_dieShadow_Blur(){return this.DiceState.spinning?"blur(80px)":"blur(20px)"},css_dieShadow_Transform(){return"translateZ("+(this.DiceState.spinning?"-50":"0")+"px) translate3d( 0, 0, 0)"},css_cubeTransformSpinning(){const[e,i,t]=this.Die.faces[this.DiceState.face-1].orientation;return"rotateX("+e+"deg) rotateY("+i+"deg) rotateZ("+t+"deg) translate3d( 0, 0, 0)"},css_cubeTransformStanding(){const[e,i,t]=this.Die.faces[this.DiceState.face-1].orientation;let[n,o]=[0,0];this.currentInteraction=="sensor"?(n=this.DiceState.accelerometer[0],o=this.DiceState.accelerometer[1]):(this.currentInteraction=="mouse"||this.currentInteraction=="touch")&&(n=this.mouseTouchCoords[0],o=this.mouseTouchCoords[1]),this.hasInteracted||(n=40,o=40);let s=40,u=.002,a=0,c=0,l=0;if(this.DiceState.face===1?!this.currentInteraction||this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(c=e+u*(n*s),a=i+u*(o*s),l=t):this.currentInteraction=="sensor"&&(a=e+n*s,c=i+-o*s,l=t):this.DiceState.face===2?this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(c=e+u*(n*s),a=i,l=t+u*(o*s)):this.currentInteraction=="sensor"&&(a=e+n*s,c=i,l=t+o*s):this.DiceState.face===3?this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(a=i+u*(o*s),c=t,l=e+u*(-n*s)):this.currentInteraction=="sensor"&&(a=e+n*s,c=i+-o*s,l=t):this.DiceState.face===4?this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(a=i+u*(o*s),c=t,l=e+u*(n*s)):this.currentInteraction=="sensor"&&(a=e+n*s,c=i+-o*s,l=t):this.DiceState.face===5?this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(a=i,c=e+u*(n*s),l=t+u*(-o*s)):this.currentInteraction=="sensor"&&(a=e+n*40,c=i,l=t+u*(-o*s)):this.DiceState.face===6&&(this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(a=i+u*(o*s),c=e+u*(n*s),l=t):this.currentInteraction=="sensor"&&(a=e+n*s,c=i+o*s,l=t)),!this.currentInteraction||this.currentInteraction=="mouse"||this.currentInteraction=="sensor")return"rotateX("+a+"deg) rotateY("+c+"deg) rotateZ("+l+"deg) translate3d( 0, 0, 0)";if(this.currentInteraction=="touch")return"rotateX("+-a+"deg) rotateY("+-c+"deg) rotateZ("+l+"deg) translate3d( 0, 0, 0)"}}},z=Object.assign(j,{setup(e){v(t=>({"98441bec":t.css_dieShadow_Blur,"37472afe":t.css_dieShadow_BorderRadius,"243590ae":t.css_dieShadow_Transform,"5a5d6d3f":t.css_cubeTransformStanding}));const i=S();return(t,n)=>(h(),m("div",T,[t.showSensorPermissionExperience?(h(),m("div",k,[M,r("div",{onClick:n[0]||(n[0]=o=>t.checkMotionPermission()),class:"p-2 bg-orange-600 text-white cursor-pointer pointer-events-auto"},"Allow"),r("div",{onClick:n[1]||(n[1]=o=>t.showSensorPermissionExperience=!1),class:"test-xl font-bold p-2 rounded-full cursor-pointer pointer-events-auto"},"X")])):p("",!0),t.showDevTools?(h(),m("div",B,[r("div",null,d(t.DiceState.spinning),1),r("div",null,d(t.devOutput_motionEvent),1),r("div",null,"Dice face: "+d(t.DiceState.face),1),r("div",null,"currentInteraction: "+d(t.currentInteraction),1),r("div",null,"Dice face: "+d(t.DiceState.face),1),r("div",null,"Dice spinning: "+d(t.DiceState.spinning),1),r("div",null,"Use bg map: "+d(t.useBGmap),1),r("div",F,"sensors: "+d(t.sensors.gyrocoords),1)])):p("",!0),r("div",C,[r("div",{onClick:n[2]||(n[2]=o=>t.getRandomDieFace()),class:"p-4 px-8 rounded-full bg-white hover:bg-gray-100 text-teal-800 hover:scale-105 transition cursor-pointer"},"ROLL")]),r("div",{id:"dieParent",ref:"dieParent",onClick:n[3]||(n[3]=o=>t.handleClick()),class:g(["die cursor-pointer",[t.DiceState.spinning?"spinning":t.DiceState.hasRolled?"standing":"",{useBGmap:t.useBGmap}]])},[r("div",O,[(h(!0),m(y,null,w(_(i).dice[_(i).currentDie].images,(o,s)=>(h(),m("div",{key:"face-"+s,class:g([t.Die.faces[s].name,t.DiceState.face===s+1||t.DiceState.spinning?"lightFacing":""]),style:b(t.useBGmap?"":"background-image: url("+(o.type=="localStorage"?o.src:"images/"+o.src)+")")},null,6))),128))])],2)]))}}),V=R(z,[["__scopeId","data-v-6f0ffaf7"]]),H={class:"w-full h-full flex justify-center items-center"},$={__name:"index",setup(e){return(i,t)=>{const n=V;return h(),m("div",H,[P(n)])}}};export{$ as default};
