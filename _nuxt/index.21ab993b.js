import{r as S,_ as f,e as v,f as w,o as h,a as m,b as u,h as p,t as d,F as y,i as I,j as g,k as E,u as _,p as b,l as x,m as P,q as T}from"./entry.23d54327.js";import{_ as R}from"./_plugin-vue_export-helper.c27b6911.js";const D=S("Motion",{android:()=>f(()=>import("./web.625723cf.js"),["./web.625723cf.js","./entry.23d54327.js","./entry.63d5243b.css"],import.meta.url).then(e=>new e.MotionWeb),ios:()=>f(()=>import("./web.625723cf.js"),["./web.625723cf.js","./entry.23d54327.js","./entry.63d5243b.css"],import.meta.url).then(e=>new e.MotionWeb),web:()=>f(()=>import("./web.625723cf.js"),["./web.625723cf.js","./entry.23d54327.js","./entry.63d5243b.css"],import.meta.url).then(e=>new e.MotionWeb)});const k=e=>(b("data-v-e8c9ca8f"),e=e(),x(),e),L={class:"w-full h-full flex flex-col justify-center items-center"},M={key:0,class:"flex justify-center space-x-2 items-center absolute top-4 mt-12 mx-4 z-50 pointer-events-auto bg-yellow-200 text-xs p-2 text-orange-800"},B=k(()=>u("div",null,"It's better with motion sensors enabled",-1)),C={key:1,class:"w-full my-8 overflow-hidden"},F={class:"whitespace-nowrap"},O={id:"dieInner",class:"cube"},j={name:"Dice",props:{},components:{},data(){return{showDevTools:!1,showSensorPermissionExperience:!1,useBGmap:!1,DiceState:{face:1,spinning:!1,accelerometer:[0,0],hasRolled:!1},Die:{faces:[{name:"front",orientation:[0,0,0],image:null},{name:"back",orientation:[90,0,0],image:null},{name:"top",orientation:[0,90,0],image:null},{name:"bottom",orientation:[0,-90,0],image:null},{name:"left",orientation:[-90,0,0],image:null},{name:"right",orientation:[-180,0,0],image:null}]},dummyImages:["dummy-400x400-BodyLanguage.jpg","dummy-400x400-CharlesBaudelaire.jpg","dummy-400x400-Eye.jpg","dummy-400x400-HappyBoy.jpg","dummy-400x400-Headphone.jpg","dummy-400x400-TShirt.jpg"],faceViews:[[0,0,0],[90,0,0],[0,90,0],[0,-90,0],[-90,0,0],[-180,0,0]],accelerationHandler:null,orientationHandler:null,currentInteraction:null,mouseTouchCoords:[1,1],sensors:{permission:!1,gyro:!1,orientation:!1,gyrocoords:{tilt:null,turn:null,rotate:null}},devOutput_motionEvent:null}},async mounted(){document.getElementById("dieParent").addEventListener("animationend",()=>{this.DiceState.spinning=!1}),document.addEventListener("keydown",i=>{this.handleKeyDown(i)}),document.addEventListener("mousemove",i=>{if(!this.currentInteraction!="sensor"){let t=(window.innerWidth/2-i.pageX)/-5,n=(window.innerHeight/2-i.pageY)/5;this.mouseTouchCoords=[t,n],this.currentInteraction="mouse"}}),document.addEventListener("touchmove",i=>{if(this.currentInteraction!="sensor"){let t=typeof i.originalEvent>"u"?i:i.originalEvent,n=t.touches[0]||t.changedTouches[0],s=n.pageX,o=n.pageY;this.mouseTouchCoords=[s,o],this.currentInteraction="touch"}}),await this.checkMotionPermission()},methods:{handleKeyDown(e){console.log("func handleKeyDown %O",e),e.code==="Space"&&this.getRandomDieFace()},handleClick(){console.log("func handleClick()"),this.getRandomDieFace()},getRandomDieFace(){this.rollToFace(Math.floor(Math.random()*6+1))},rollToFace(e){console.log("func roll(), face: %O",e),this.DiceState.face=e,this.DiceState.spinning=!0,this.DiceState.hasRolled=!0},async checkMotionPermission(){window.DeviceOrientationEvent&&typeof window.DeviceOrientationEvent.requestPermission=="function"?await window.DeviceOrientationEvent.requestPermission().then(e=>{e=="granted"&&(this.showSensorPermissionExperience=!1,this.setMotionListeners())}).catch(e=>{console.log("Error getting sensor permission: %O",e),this.showSensorPermissionExperience=!0}):this.setMotionListeners()},async setMotionListeners(){this.orientationHandler=await D.addListener("orientation",e=>{if(this.devOutput_motionEvent={x:e.alpha.toFixed(2),y:e.beta.toFixed(2),z:e.gamma.toFixed(2)},this.currentInteraction="sensor",!this.DiceState.spinning){let i=e.beta;e.alpha;let t=e.gamma;const n=i/180,s=t/90;this.DiceState.accelerometer=[n,s]}}),this.accelerationHandler=await D.addListener("accel",e=>{this.devOutput_motionEvent={x:e.rotationRate.alpha.toFixed(2),y:e.rotationRate.beta.toFixed(2),z:e.rotationRate.gamma.toFixed(2)},this.currentInteraction="sensor",(e.rotationRate.alpha>256||e.rotationRate.beta>256||e.rotationRate.gamma>256)&&!this.DiceState.spinning&&this.getRandomDieFace()})},stopMotionListeners(){},destroyListeners(){},setMotionListenersEXPERIMENTAL(){}},computed:{css_dieShadow_BorderRadius(){return this.DiceState.spinning?"50%":"10px"},css_dieShadow_Blur(){return this.DiceState.spinning?"blur(80px)":"blur(20px)"},css_dieShadow_Transform(){return"translateZ("+(this.DiceState.spinning?"-50":"0")+"px) translate3d( 0, 0, 0)"},css_cubeTransformSpinning(){const[e,i,t]=this.Die.faces[this.DiceState.face-1].orientation;return"rotateX("+e+"deg) rotateY("+i+"deg) rotateZ("+t+"deg) translate3d( 0, 0, 0)"},css_cubeTransformStanding(){const[e,i,t]=this.Die.faces[this.DiceState.face-1].orientation;let[n,s]=[0,0];this.currentInteraction=="sensor"?(n=this.DiceState.accelerometer[0],s=this.DiceState.accelerometer[1]):(this.currentInteraction=="mouse"||this.currentInteraction=="touch")&&(n=this.mouseTouchCoords[0],s=this.mouseTouchCoords[1]);let o=40,l=.002,r=0,a=0,c=0;if(this.DiceState.face===1?this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(a=e+l*(n*o),r=i+l*(s*o),c=t):this.currentInteraction=="sensor"&&(r=e+n*o,a=i+-s*o,c=t):this.DiceState.face===2?this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(a=e+l*(n*o),r=i,c=t+l*(s*o)):this.currentInteraction=="sensor"&&(r=e+n*o,a=i,c=t+s*o):this.DiceState.face===3?this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(r=i+l*(s*o),a=t,c=e+l*(-n*o)):this.currentInteraction=="sensor"&&(r=e+n*o,a=i+-s*o,c=t):this.DiceState.face===4?this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(r=i+l*(s*o),a=t,c=e+l*(n*o)):this.currentInteraction=="sensor"&&(r=e+n*o,a=i+-s*o,c=t):this.DiceState.face===5?this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(r=i,a=e+l*(n*o),c=t+l*(-s*o)):this.currentInteraction=="sensor"&&(r=e+n*40,a=i,c=t+l*(-s*o)):this.DiceState.face===6&&(this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(r=i+l*(s*o),a=e+l*(n*o),c=t):this.currentInteraction=="sensor"&&(r=e+n*o,a=i+s*o,c=t)),this.currentInteraction=="mouse"||this.currentInteraction=="sensor")return"rotateX("+r+"deg) rotateY("+a+"deg) rotateZ("+c+"deg) translate3d( 0, 0, 0)";if(this.currentInteraction=="touch")return"rotateX("+-r+"deg) rotateY("+-a+"deg) rotateZ("+c+"deg) translate3d( 0, 0, 0)"}}},z=Object.assign(j,{setup(e){v(t=>({"0350220d":t.css_dieShadow_Blur,"336be784":t.css_dieShadow_BorderRadius,"636f9186":t.css_dieShadow_Transform,d28e7848:t.css_cubeTransformStanding}));const i=w();return(t,n)=>(h(),m("div",L,[t.showSensorPermissionExperience?(h(),m("div",M,[B,u("div",{onClick:n[0]||(n[0]=s=>t.checkMotionPermission()),class:"p-2 bg-orange-600 text-white cursor-pointer pointer-events-auto"},"Allow"),u("div",{onClick:n[1]||(n[1]=s=>t.showSensorPermissionExperience=!1),class:"test-xl font-bold p-2 rounded-full cursor-pointer pointer-events-auto"},"X")])):p("",!0),t.showDevTools?(h(),m("div",C,[u("div",null,d(t.DiceState.spinning),1),u("div",null,d(t.devOutput_motionEvent),1),u("div",null,"Dice face: "+d(t.DiceState.face),1),u("div",null,"currentInteraction: "+d(t.currentInteraction),1),u("div",null,"Dice face: "+d(t.DiceState.face),1),u("div",null,"Dice spinning: "+d(t.DiceState.spinning),1),u("div",null,"Use bg map: "+d(t.useBGmap),1),u("div",F,"sensors: "+d(t.sensors.gyrocoords),1)])):p("",!0),u("div",{id:"dieParent",ref:"dieParent",onClick:n[2]||(n[2]=s=>t.handleClick()),class:g(["die cursor-pointer",[t.DiceState.spinning?"spinning":t.DiceState.hasRolled?"standing":"",{useBGmap:t.useBGmap}]])},[u("div",O,[(h(!0),m(y,null,I(_(i).dice[_(i).currentDie].images,(s,o)=>(h(),m("div",{key:"face-"+o,class:g([t.Die.faces[o].name,t.DiceState.face===o+1||t.DiceState.spinning?"lightFacing":""]),style:E(t.useBGmap?"":"background-image: url(images/"+s.url+")")},null,6))),128))])],2)]))}}),V=R(z,[["__scopeId","data-v-e8c9ca8f"]]),H={class:"w-full h-full flex justify-center items-center"},G={__name:"index",setup(e){return P("Pictodice"),(i,t)=>{const n=V;return h(),m("div",H,[T(n)])}}};export{G as default};
