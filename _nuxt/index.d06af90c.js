import{_ as M,f as ce,a as le,o as S,b as C,e as E,h as de,t as W,F as ue,r as fe,i as q,j as me,k as he,l as ge,m as pe}from"./entry.a840adb5.js";import{_ as we}from"./app.config.f0cc3ac7.js";/*! Capacitor: https://capacitorjs.com/ - MIT License */const ve=t=>{const e=new Map;e.set("web",{name:"web"});const n=t.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},o=(i,a)=>{n.platforms.set(i,a)},r=i=>{n.platforms.has(i)&&(n.currentPlatform=n.platforms.get(i))};return n.addPlatform=o,n.setPlatform=r,n},ye=t=>t.CapacitorPlatforms=ve(t),N=ye(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});N.addPlatform;N.setPlatform;var x;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(x||(x={}));class A extends Error{constructor(e,n,o){super(e),this.message=e,this.code=n,this.data=o}}const be=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},_e=t=>{var e,n,o,r,i;const a=t.CapacitorCustomPlatform||null,s=t.Capacitor||{},c=s.Plugins=s.Plugins||{},l=t.CapacitorPlatforms,L=()=>a!==null?a.name:be(t),b=((e=l==null?void 0:l.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||L,k=()=>b()!=="web",Z=((n=l==null?void 0:l.currentPlatform)===null||n===void 0?void 0:n.isNativePlatform)||k,J=d=>{const u=j.get(d);return!!(u!=null&&u.platforms.has(b())||B(d))},Q=((o=l==null?void 0:l.currentPlatform)===null||o===void 0?void 0:o.isPluginAvailable)||J,ee=d=>{var u;return(u=s.PluginHeaders)===null||u===void 0?void 0:u.find(_=>_.name===d)},B=((r=l==null?void 0:l.currentPlatform)===null||r===void 0?void 0:r.getPluginHeader)||ee,te=d=>t.console.error(d),ne=(d,u,_)=>Promise.reject(`${_} does not have an implementation of "${u}".`),j=new Map,re=(d,u={})=>{const _=j.get(d);if(_)return console.warn(`Capacitor plugin "${d}" already registered. Cannot register plugins twice.`),_.proxy;const y=b(),P=B(d);let p;const ie=async()=>(!p&&y in u?p=typeof u[y]=="function"?p=await u[y]():p=u[y]:a!==null&&!p&&"web"in u&&(p=typeof u.web=="function"?p=await u.web():p=u.web),p),oe=(f,m)=>{var g,w;if(P){const v=P==null?void 0:P.methods.find(h=>m===h.name);if(v)return v.rtype==="promise"?h=>s.nativePromise(d,m.toString(),h):(h,D)=>s.nativeCallback(d,m.toString(),h,D);if(f)return(g=f[m])===null||g===void 0?void 0:g.bind(f)}else{if(f)return(w=f[m])===null||w===void 0?void 0:w.bind(f);throw new A(`"${d}" plugin is not implemented on ${y}`,x.Unimplemented)}},T=f=>{let m;const g=(...w)=>{const v=ie().then(h=>{const D=oe(h,f);if(D){const O=D(...w);return m=O==null?void 0:O.remove,O}else throw new A(`"${d}.${f}()" is not implemented on ${y}`,x.Unimplemented)});return f==="addListener"&&(v.remove=async()=>m()),v};return g.toString=()=>`${f.toString()}() { [capacitor code] }`,Object.defineProperty(g,"name",{value:f,writable:!1,configurable:!1}),g},F=T("addListener"),H=T("removeListener"),ae=(f,m)=>{const g=F({eventName:f},m),w=async()=>{const h=await g;H({eventName:f,callbackId:h},m)},v=new Promise(h=>g.then(()=>h({remove:w})));return v.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await w()},v},R=new Proxy({},{get(f,m){switch(m){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return P?ae:F;case"removeListener":return H;default:return T(m)}}});return c[d]=R,j.set(d,{name:d,proxy:R,platforms:new Set([...Object.keys(u),...P?[y]:[]])}),R},se=((i=l==null?void 0:l.currentPlatform)===null||i===void 0?void 0:i.registerPlugin)||re;return s.convertFileSrc||(s.convertFileSrc=d=>d),s.getPlatform=b,s.handleError=te,s.isNativePlatform=Z,s.isPluginAvailable=Q,s.pluginMethodNoop=ne,s.registerPlugin=se,s.Exception=A,s.DEBUG=!!s.DEBUG,s.isLoggingEnabled=!!s.isLoggingEnabled,s.platform=s.getPlatform(),s.isNative=s.isNativePlatform(),s},Pe=t=>t.Capacitor=_e(t),I=Pe(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),U=I.registerPlugin;I.Plugins;class Y{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,n){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(n);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r);const i=async()=>this.removeListener(e,n),a=Promise.resolve({remove:i});return Object.defineProperty(a,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await i()}}),a}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n){const o=this.listeners[e];o&&o.forEach(r=>r(n))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:o=>{this.notifyListeners(n,o)}}}unimplemented(e="not implemented"){return new I.Exception(e,x.Unimplemented)}unavailable(e="not available"){return new I.Exception(e,x.Unavailable)}async removeListener(e,n){const o=this.listeners[e];if(!o)return;const r=o.indexOf(n);this.listeners[e].splice(r,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const V=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),z=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Ee extends Y{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(o=>{if(o.length<=0)return;let[r,i]=o.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");r=z(r).trim(),i=z(i).trim(),n[r]=i}),n}async setCookie(e){try{const n=V(e.key),o=V(e.value),r=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),a=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${o||""}${r}; path=${i}; ${a};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}U("CapacitorCookies",{web:()=>new Ee});const xe=async t=>new Promise((e,n)=>{const o=new FileReader;o.onload=()=>{const r=o.result;e(r.indexOf(",")>=0?r.split(",")[1]:r)},o.onerror=r=>n(r),o.readAsDataURL(t)}),Se=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(r=>r.toLocaleLowerCase()).reduce((r,i,a)=>(r[i]=t[e[a]],r),{})},Ce=(t,e=!0)=>t?Object.entries(t).reduce((o,r)=>{const[i,a]=r;let s,c;return Array.isArray(a)?(c="",a.forEach(l=>{s=e?encodeURIComponent(l):l,c+=`${i}=${s}&`}),c.slice(0,-1)):(s=e?encodeURIComponent(a):a,c=`${i}=${s}`),`${o}&${c}`},"").substr(1):null,Le=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),r=Se(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(r.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[a,s]of Object.entries(t.data||{}))i.set(a,s);n.body=i.toString()}else if(r.includes("multipart/form-data")){const i=new FormData;if(t.data instanceof FormData)t.data.forEach((s,c)=>{i.append(c,s)});else for(const s of Object.keys(t.data))i.append(s,t.data[s]);n.body=i;const a=new Headers(n.headers);a.delete("content-type"),n.headers=a}else(r.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class De extends Y{async request(e){const n=Le(e,e.webFetchExtra),o=Ce(e.params,e.shouldEncodeUrlParams),r=o?`${e.url}?${o}`:e.url,i=await fetch(r,n),a=i.headers.get("content-type")||"";let{responseType:s="text"}=i.ok?e:{};a.includes("application/json")&&(s="json");let c,l;switch(s){case"arraybuffer":case"blob":l=await i.blob(),c=await xe(l);break;case"json":c=await i.json();break;case"document":case"text":default:c=await i.text()}const L={};return i.headers.forEach((b,k)=>{L[k]=b}),{data:c,headers:L,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}U("CapacitorHttp",{web:()=>new De});const G=U("Motion",{android:()=>M(()=>import("./web.41e4ae5c.js"),["./web.41e4ae5c.js","./entry.a840adb5.js","./entry.dbd02a41.css","./app.config.f0cc3ac7.js"],import.meta.url).then(t=>new t.MotionWeb),ios:()=>M(()=>import("./web.41e4ae5c.js"),["./web.41e4ae5c.js","./entry.a840adb5.js","./entry.dbd02a41.css","./app.config.f0cc3ac7.js"],import.meta.url).then(t=>new t.MotionWeb),web:()=>M(()=>import("./web.41e4ae5c.js"),["./web.41e4ae5c.js","./entry.a840adb5.js","./entry.dbd02a41.css","./app.config.f0cc3ac7.js"],import.meta.url).then(t=>new t.MotionWeb)});const $={name:"Dice",props:{},components:{},data(){return{showSensorPermissionExperience:!1,useBGmap:!1,DiceState:{face:1,spinning:!1,accelerometer:[.3,.25],hasRolled:!1},Die:{faces:[{name:"front",orientation:[0,0,0],image:null},{name:"back",orientation:[90,0,0],image:null},{name:"top",orientation:[0,90,0],image:null},{name:"bottom",orientation:[0,-90,0],image:null},{name:"left",orientation:[-90,0,0],image:null},{name:"right",orientation:[-180,0,0],image:null}]},dummyImages:["dummy-400x400-BodyLanguage.jpg","dummy-400x400-CharlesBaudelaire.jpg","dummy-400x400-Eye.jpg","dummy-400x400-HappyBoy.jpg","dummy-400x400-Headphone.jpg","dummy-400x400-TShirt.jpg"],faceViews:[[0,0,0],[90,0,0],[0,90,0],[0,-90,0],[-90,0,0],[-180,0,0]],accelerationHandler:null,orientationHandler:null,currentInteraction:null,mouseTouchCoords:[1,1],sensors:{permission:!1,gyro:!1,orientation:!1,gyrocoords:{tilt:null,turn:null,rotate:null}},devOutput_motionEvent:null}},mounted(){document.addEventListener("keydown",t=>{this.handleKeyDown(t)}),document.addEventListener("mousemove",t=>{if(!this.currentInteraction!="sensor"){let e=(window.innerWidth/2-t.pageX)/-5,n=(window.innerHeight/2-t.pageY)/5;this.mouseTouchCoords=[e,n],this.currentInteraction="mouse"}}),document.addEventListener("touchmove",t=>{if(this.currentInteraction!="sensor"){let e=typeof t.originalEvent>"u"?t:t.originalEvent,n=e.touches[0]||e.changedTouches[0],o=n.pageX,r=n.pageY;this.mouseTouchCoords=[o,r],this.currentInteraction="touch"}}),typeof DeviceOrientationEvent.requestPermission=="function"?this.showSensorPermissionExperience=!0:this.setMotionListenersNEW()},methods:{handleKeyDown(t){console.log("func handleKeyDown %O",t),t.code==="Space"&&this.getRandomDieFace()},handleClick(){console.log("func handleClick()"),this.getRandomDieFace()},getRandomDieFace(){this.rollToFace(Math.floor(Math.random()*6+1))},rollToFace(t){console.log("func roll(), face: %O",t),this.DiceState.face=t,this.DiceState.spinning=!0,this.DiceState.hasRolled=!0,setTimeout(()=>{this.DiceState.spinning=!1},2e3)},async setMotionListenersNEW(){typeof DeviceOrientationEvent.requestPermission=="function"&&await DeviceOrientationEvent.requestPermission().then(t=>{t==="granted"&&(this.showSensorPermissionExperience=!1)}).catch(t=>{this.showSensorPermissionExperience=!1,console.log("Error getting sensor permission: %O",t)}),this.orientationHandler=await G.addListener("orientation",t=>{if(console.log("Device orientation event: %O",t),this.devOutput_motionEvent={x:t.alpha.toFixed(2),y:t.beta.toFixed(2),z:t.gamma.toFixed(2)},this.currentInteraction="sensor",!this.DiceState.spinning){let e=t.beta;t.alpha;let n=t.gamma;const o=e/180,r=n/90;this.DiceState.accelerometer=[o,r]}}),this.accelerationHandler=await G.addListener("accel",t=>{console.log("Device acceleration event: %O",t),this.devOutput_motionEvent={x:t.rotationRate.alpha.toFixed(2),y:t.rotationRate.beta.toFixed(2),z:t.rotationRate.gamma.toFixed(2)},this.currentInteraction="sensor",(t.rotationRate.alpha>256||t.rotationRate.beta>256||t.rotationRate.gamma>256)&&!this.DiceState.spinning&&this.random()})},stopMotionListeners(){},destroyListeners(){},setMotionListenersEXPERIMENTAL(){}},computed:{css_dieShadow_BorderRadius(){return this.DiceState.spinning?"50%":"10px"},css_dieShadow_Blur(){return this.DiceState.spinning?"blur(80px)":"blur(20px)"},css_dieShadow_Transform(){return"translateZ("+(this.DiceState.spinning?"-50":"0")+"px) translate3d( 0, 0, 0)"},css_cubeTransformSpinning(){const[t,e,n]=this.Die.faces[this.DiceState.face-1].orientation;return"rotateX("+t+"deg) rotateY("+e+"deg) rotateZ("+n+"deg) translate3d( 0, 0, 0)"},css_cubeTransformStanding(){console.log("css_cubeTransformStanding face: %O",this.DiceState.face-1);const[t,e,n]=this.Die.faces[this.DiceState.face-1].orientation,[o,r]=this.currentInteraction=="sensor"?this.DiceState.accelerometer:this.mouseTouchCoords;let i=.002,a=0,s=0,c=0;if(this.DiceState.face===1?this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(s=t+i*(o*40),a=e+i*(r*40),c=n):this.currentInteraction=="sensor"&&(a=t+o*40,s=e+-r*40,c=n):this.DiceState.face===2?this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(s=t+i*(o*40),a=e,c=n+i*(r*40)):this.currentInteraction=="sensor"&&(a=t+o*40,s=e,c=n+r*40):this.DiceState.face===3?this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(a=e+i*(r*40),s=n,c=t+i*(-o*40)):this.currentInteraction=="sensor"&&(a=t+o*40,s=e+-r*40,c=n):this.DiceState.face===4?this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(a=e+i*(r*40),s=n,c=t+i*(o*40)):this.currentInteraction=="sensor"&&(a=t+o*40,s=e+-r*40,c=n):this.DiceState.face===5?this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(a=e,s=t+i*(o*40),c=n+i*(-r*40)):this.currentInteraction=="sensor"&&(a=t+o*40,s=e,c=n+i*(-r*40)):this.DiceState.face===6&&(this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(a=e+i*(r*40),s=t+i*(o*40),c=n):this.currentInteraction=="sensor"&&(a=t+o*40,s=e+r*40,c=n)),this.currentInteraction=="mouse"||this.currentInteraction=="sensor")return"rotateX("+a+"deg) rotateY("+s+"deg) rotateZ("+c+"deg) translate3d( 0, 0, 0)";if(this.currentInteraction=="touch")return"rotateX("+-a+"deg) rotateY("+-s+"deg) rotateZ("+c+"deg) translate3d( 0, 0, 0)"}}},K=()=>{ce(t=>({"4b36d3a3":t.css_dieShadow_Blur,"662aa31a":t.css_dieShadow_BorderRadius,"25066db0":t.css_dieShadow_Transform,"4e093d86":t.css_cubeTransformStanding}))},X=$.setup;$.setup=X?(t,e)=>(K(),X(t,e)):K;const Oe=$,Ie={class:"w-full h-full flex flex-col justify-center items-center"},ke={key:0},je={class:"w-full my-8 overflow-hidden"},Te={class:"cube"};function Re(t,e,n,o,r,i){return S(),C("div",Ie,[r.showSensorPermissionExperience?(S(),C("div",ke,[E("div",{onClick:e[0]||(e[0]=(...a)=>i.setMotionListenersNEW&&i.setMotionListenersNEW(...a)),class:"p-2 bg-gray-200 cursor-pointer"},"Request Sensor Permission")])):de("",!0),E("div",je,[E("div",null,W(r.devOutput_motionEvent),1),E("div",null,"Dice face: "+W(r.DiceState.face),1)]),E("div",{onClick:e[1]||(e[1]=a=>i.handleClick()),class:q(["die cursor-pointer",[r.DiceState.spinning?"spinning":"standing",{useBGmap:r.useBGmap}]])},[E("div",Te,[(S(!0),C(ue,null,fe(r.Die.faces,(a,s)=>(S(),C("div",{key:"face-"+s,class:q([a.name,r.DiceState.face===s+1||r.DiceState.spinning?"lightFacing":""]),style:me(r.useBGmap?"":"background-image: url(images/"+r.dummyImages[s]+")")},null,6))),128))])],2)])}const Me=le(Oe,[["render",Re],["__scopeId","data-v-8002bbd5"]]);function Ae(){const t=he();return t._appConfig||(t._appConfig=ge(we)),t._appConfig}const Ue={class:"w-full h-full flex flex-col justify-center items-center"},$e={__name:"index",setup(t){return Ae(),(e,n)=>{const o=Me;return S(),C("div",Ue,[pe(o)])}}},He=Object.freeze(Object.defineProperty({__proto__:null,default:$e},Symbol.toStringTag,{value:"Module"}));export{Y as W,He as i};
