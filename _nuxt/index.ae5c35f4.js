import{r as D,_ as m,l as I,a as w,m as S,o as h,b as p,e as a,i as f,t as u,F as y,p as b,q as _,u as g,s as E,v as x,f as R}from"./entry.c4daf112.js";import{_ as P}from"./_plugin-vue_export-helper.c27b6911.js";const v=D("Motion",{android:()=>m(()=>import("./web.dfae9f86.js"),["./web.dfae9f86.js","./entry.c4daf112.js","./entry.e7b994eb.css"],import.meta.url).then(t=>new t.MotionWeb),ios:()=>m(()=>import("./web.dfae9f86.js"),["./web.dfae9f86.js","./entry.c4daf112.js","./entry.e7b994eb.css"],import.meta.url).then(t=>new t.MotionWeb),web:()=>m(()=>import("./web.dfae9f86.js"),["./web.dfae9f86.js","./entry.c4daf112.js","./entry.e7b994eb.css"],import.meta.url).then(t=>new t.MotionWeb)});const L=t=>(E("data-v-1705a454"),t=t(),x(),t),k={class:"w-full h-full flex flex-col justify-center items-center"},T={key:0,class:"flex justify-center space-x-2 items-center absolute top-4 mt-12 mx-4 z-50 pointer-events-auto bg-yellow-200 text-xs p-2 text-orange-800"},M=L(()=>a("div",null,"It's better with motion sensors enabled",-1)),F={key:1,class:"w-full my-8 overflow-hidden"},C={class:"whitespace-nowrap"},O={class:"absolute bottom-4"},B={id:"dieInner",class:"cube"},z=["src"],V={key:1,class:"p-2 text-2xl text-center font-bold italic uppercase"},X={name:"Dice",props:{},components:{},data(){return{showDevTools:!1,showSensorPermissionExperience:!1,hasInteracted:!1,useBGmap:!1,DiceState:{face:1,spinning:!1,accelerometer:[0,0],hasRolled:!1},Die:{faces:[{name:"front",orientation:[0,0,0]},{name:"back",orientation:[90,0,0]},{name:"top",orientation:[0,90,0]},{name:"bottom",orientation:[0,-90,0]},{name:"left",orientation:[-90,0,0]},{name:"right",orientation:[-180,0,0]}]},accelerationHandler:null,orientationHandler:null,currentInteraction:null,mouseTouchCoords:[1,1],sensors:{permission:!1,gyro:!1,orientation:!1,gyrocoords:{tilt:null,turn:null,rotate:null}},devOutput_motionEvent:null}},async mounted(){document.getElementById("dieParent").addEventListener("animationend",()=>{this.DiceState.spinning=!1}),document.addEventListener("keydown",i=>{this.handleKeyDown(i)}),document.addEventListener("mousemove",i=>{if(this.hasInteracted||(this.hasInteracted=!0),!this.currentInteraction!="sensor"){let o=(window.innerWidth/2-i.pageX)/-5,e=(window.innerHeight/2-i.pageY)/5;this.mouseTouchCoords=[o,e],this.currentInteraction="mouse"}}),document.addEventListener("touchmove",i=>{if(this.hasInteracted||(this.hasInteracted=!0),this.currentInteraction!="sensor"){let o=typeof i.originalEvent>"u"?i:i.originalEvent,e=o.touches[0]||o.changedTouches[0],s=e.pageX,n=e.pageY;this.mouseTouchCoords=[s,n],this.currentInteraction="touch"}}),await this.checkMotionPermission()},methods:{handleKeyDown(t){t.code==="Space"&&this.getRandomDieFace()},handleClick(){this.getRandomDieFace()},getRandomDieFace(){this.rollToFace(Math.floor(Math.random()*6+1))},rollToFace(t){this.DiceState.face=t,this.DiceState.spinning=!0,this.DiceState.hasRolled=!0},async checkMotionPermission(){window.DeviceOrientationEvent&&typeof window.DeviceOrientationEvent.requestPermission=="function"?await window.DeviceOrientationEvent.requestPermission().then(t=>{t=="granted"&&(this.showSensorPermissionExperience=!1,this.setMotionListeners())}).catch(t=>{console.log("Error getting sensor permission: %O",t),this.showSensorPermissionExperience=!0}):this.setMotionListeners()},async setMotionListeners(){this.orientationHandler=await v.addListener("orientation",t=>{if(this.hasInteracted||(this.hasInteracted=!0),this.devOutput_motionEvent={x:t.alpha.toFixed(2),y:t.beta.toFixed(2),z:t.gamma.toFixed(2)},this.currentInteraction="sensor",!this.DiceState.spinning){let i=t.beta;t.alpha;let o=t.gamma;const e=i/180,s=o/90;this.DiceState.accelerometer=[e,s]}}),this.accelerationHandler=await v.addListener("accel",t=>{this.hasInteracted||(this.hasInteracted=!0),this.devOutput_motionEvent={x:t.rotationRate.alpha.toFixed(2),y:t.rotationRate.beta.toFixed(2),z:t.rotationRate.gamma.toFixed(2)},this.currentInteraction="sensor",(t.rotationRate.alpha>256||t.rotationRate.beta>256||t.rotationRate.gamma>256)&&!this.DiceState.spinning&&this.getRandomDieFace()})},stopMotionListeners(){},destroyListeners(){},setMotionListenersEXPERIMENTAL(){}},computed:{css_dieShadow_BorderRadius(){return this.DiceState.spinning?"50%":"10px"},css_dieShadow_Blur(){return this.DiceState.spinning?"blur(80px)":"blur(20px)"},css_dieShadow_Transform(){return"translateZ("+(this.DiceState.spinning?"-50":"0")+"px) translate3d( 0, 0, 0)"},css_cubeTransformSpinning(){const[t,i,o]=this.Die.faces[this.DiceState.face-1].orientation;return"rotateX("+t+"deg) rotateY("+i+"deg) rotateZ("+o+"deg) translate3d( 0, 0, 0)"},css_cubeTransformStanding(){const[t,i,o]=this.Die.faces[this.DiceState.face-1].orientation;let[e,s]=[0,0];this.currentInteraction=="sensor"?(e=this.DiceState.accelerometer[0],s=this.DiceState.accelerometer[1]):(this.currentInteraction=="mouse"||this.currentInteraction=="touch")&&(e=this.mouseTouchCoords[0],s=this.mouseTouchCoords[1]),this.hasInteracted||(e=40,s=40);let n=40,r=.002,c=0,l=0,d=0;if(this.DiceState.face===1?!this.currentInteraction||this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(l=t+r*(e*n),c=i+r*(s*n),d=o):this.currentInteraction=="sensor"&&(c=t+e*n,l=i+-s*n,d=o):this.DiceState.face===2?this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(l=t+r*(e*n),c=i,d=o+r*(s*n)):this.currentInteraction=="sensor"&&(c=t+e*n,l=i,d=o+s*n):this.DiceState.face===3?this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(c=i+r*(s*n),l=o,d=t+r*(-e*n)):this.currentInteraction=="sensor"&&(c=t+e*n,l=i+-s*n,d=o):this.DiceState.face===4?this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(c=i+r*(s*n),l=o,d=t+r*(e*n)):this.currentInteraction=="sensor"&&(c=t+e*n,l=i+-s*n,d=o):this.DiceState.face===5?this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(c=i,l=t+r*(e*n),d=o+r*(-s*n)):this.currentInteraction=="sensor"&&(c=t+e*40,l=i,d=o+r*(-s*n)):this.DiceState.face===6&&(this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(c=i+r*(s*n),l=t+r*(e*n),d=o):this.currentInteraction=="sensor"&&(c=t+e*n,l=i+s*n,d=o)),!this.currentInteraction||this.currentInteraction=="mouse"||this.currentInteraction=="sensor")return"rotateX("+c+"deg) rotateY("+l+"deg) rotateZ("+d+"deg) translate3d( 0, 0, 0)";if(this.currentInteraction=="touch")return"rotateX("+-c+"deg) rotateY("+-l+"deg) rotateZ("+d+"deg) translate3d( 0, 0, 0)"}}},j=Object.assign(X,{setup(t){I(e=>({c86c40d6:e.css_dieShadow_Blur,e598c5e8:e.css_dieShadow_BorderRadius,cad1ee04:e.css_dieShadow_Transform,bc3f8558:e.css_cubeTransformStanding}));const i=w(),o=S();return(e,s)=>(h(),p("div",k,[e.showSensorPermissionExperience?(h(),p("div",T,[M,a("div",{onClick:s[0]||(s[0]=n=>e.checkMotionPermission()),class:"p-2 bg-orange-600 text-white cursor-pointer pointer-events-auto"},"Allow"),a("div",{onClick:s[1]||(s[1]=n=>e.showSensorPermissionExperience=!1),class:"test-xl font-bold p-2 rounded-full cursor-pointer pointer-events-auto"},"X")])):f("",!0),e.showDevTools?(h(),p("div",F,[a("div",null,u(e.DiceState.spinning),1),a("div",null,u(e.devOutput_motionEvent),1),a("div",null,"Dice face: "+u(e.DiceState.face),1),a("div",null,"currentInteraction: "+u(e.currentInteraction),1),a("div",null,"Dice face: "+u(e.DiceState.face),1),a("div",null,"Dice spinning: "+u(e.DiceState.spinning),1),a("div",null,"Use bg map: "+u(e.useBGmap),1),a("div",C,"sensors: "+u(e.sensors.gyrocoords),1)])):f("",!0),a("div",O,[a("div",{onClick:s[2]||(s[2]=n=>e.getRandomDieFace()),class:"p-4 px-8 rounded-full bg-white hover:bg-gray-100 text-teal-800 hover:scale-105 transition cursor-pointer"},"ROLL")]),a("div",{id:"dieParent",ref:"dieParent",onClick:s[3]||(s[3]=n=>e.handleClick()),class:_(["die cursor-pointer",[e.DiceState.spinning?"spinning":e.DiceState.hasRolled?"standing":"",{useBGmap:e.useBGmap}]])},[a("div",B,[(h(!0),p(y,null,b(g(i).dice[g(i).currentDie].images,(n,r)=>(h(),p("div",{key:"face-"+r,class:_([[e.Die.faces[r].name,e.DiceState.face===r+1||e.DiceState.spinning?"lightFacing":"",n.type=="text"?"bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-purple-800 to-violet-900 text-white":"bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-gray-100 to-gray-300 text-black"],"border-2 border-white"])},[n.type&&n.src!=""&&n.type!="text"?(h(),p("img",{key:0,src:n.type=="localStorage"?n.src:g(o).app.baseURL+"images/"+n.src,class:"relative w-full h-full object-cover object-center"},null,8,z)):f("",!0),n.type=="text"?(h(),p("span",V,u(n.src),1)):f("",!0)],2))),128))])],2)]))}}),A=P(j,[["__scopeId","data-v-1705a454"]]),$={class:"w-full h-full flex justify-center items-center"},G={__name:"index",setup(t){return(i,o)=>{const e=A;return h(),p("div",$,[R(e)])}}};export{G as default};
