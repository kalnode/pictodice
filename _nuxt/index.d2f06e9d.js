import{a as v,o as d,b as m,r as I,f as x,e as r,h as u,t as g,i as h,j as p,p as B,k as b,l as w,m as k,q as _,w as C,s as G}from"./entry.e7a83224.js";import{_ as j}from"./app.config.b72d48e7.js";const E={};function T(t,n){return d(),m("span",null,[I(t.$slots,"default")])}const V=v(E,[["render",T]]);const f={name:"Dice",props:{},components:{},data(){return{useBGmap:!1,currentInteraction:null,sensors:{gyro:!1,orientation:!1},DiceState:{face:6,spinning:!1,accelerometer:[.3,.25],hasRolled:!1},faceViews:[[0,0,0],[90,0,0],[0,90,0],[0,-90,0],[-90,0,0],[-180,0,0]],dummyImages:["dummy-400x400-BodyLanguage.jpg","dummy-400x400-CharlesBaudelaire.jpg","dummy-400x400-Eye.jpg","dummy-400x400-HappyBoy.jpg","dummy-400x400-Headphone.jpg","dummy-400x400-TShirt.jpg"],mouseCoords:[0,0]}},mounted(){document.addEventListener("keydown",i=>{this.handleKeyDown(i)}),document.addEventListener("mousemove",i=>{let s=(window.innerWidth/2-i.pageX)/-5,e=(window.innerHeight/2-i.pageY)/5;this.mouseCoords=[s,e]}),document.addEventListener("touchmove",i=>{let s=typeof i.originalEvent>"u"?i:i.originalEvent,e=s.touches[0]||s.changedTouches[0],o=e.pageX,c=e.pageY;this.mouseCoords=[o,c],this.currentInteraction="touch"});try{var t=null,n=null;Promise.all([navigator.permissions.query({name:"accelerometer"}),navigator.permissions.query({name:"gyroscope"})]).then(i=>{i.every(s=>s.state==="granted")?(console.log("Permissions granted %O",i),t=new window.RelativeOrientationSensor({frequency:60,referenceFrame:"screen"}),t.addEventListener("reading",()=>{console.log("orientationSensor reading"),this.DiceState.spinning||(this.currentInteraction="sensor",this.DiceState.accelerometer=t.quaternion.map((s,e)=>{if(e<2)return Math.round(s*1e3*1e3)/(1e3*1e3)}))}),t.start(),n=new Gyroscope({frequency:60}),n.addEventListener("reading",()=>{console.log("gyroscope reading"),(n.x>9||n.z>4)&&!this.DiceState.spinning&&this.random()}),n.start()):console.log("No permissions to use RelativeOrientationSensor.")})}catch(i){console.log("try catch error on sensor reading: %O",i),window.addEventListener("deviceorientation",s=>{if(console.log("legacy deviceorientation reading"),!this.DiceState.spinning){const e=s.beta/180,o=s.gamma/90;this.DiceState.accelerometer=[e,o]}})}},methods:{handleKeyDown(t){console.log("func handleKeyDown %O",t),t.code==="Space"&&this.random()},handleClick(){console.log("func handleClick()"),this.random()},random(){console.log("func random()"),this.roll(Math.floor(Math.random()*6+1))},roll(t){console.log("func roll(), face: %O",t),this.DiceState.face=t,this.DiceState.spinning=!0,this.DiceState.hasRolled=!0,setTimeout(()=>{this.DiceState.spinning=!1},2e3)},getRandom(t,n){return(Math.floor(Math.random()*(t-n))+n)*90}},computed:{diceBG_BorderRadius(){return this.DiceState.spinning?"50%":"10px"},diceBG_Shadow(){return this.DiceState.spinning?"blur(80px)":"blur(20px)"},diceBG_transform(){return"translateZ("+(this.DiceState.spinning?"-50":"0")+"px) translate3d( 0, 0, 0)"},cubeTransformSpinning(){const[t,n,i]=this.faceViews[this.DiceState.face-1];return"rotateX("+t+"deg) rotateY("+n+"deg) rotateZ("+i+"deg) translate3d( 0, 0, 0)"},cubeTransformPerspective(){const[t,n,i]=this.faceViews[this.DiceState.face-1],[s,e]=this.mouseCoords;let o=.009,c=0,a=0,l=0;if(this.DiceState.face===1?this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(a=t+o*(s*40),c=n+o*(e*40),l=i):this.currentInteraction=="sensor"&&(c=t+s*40,a=n+-e*40,l=i):this.DiceState.face===2?this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(a=t+o*(s*40),c=n,l=i+o*(e*40)):this.currentInteraction=="sensor"&&(c=t+s*40,a=n,l=i+e*40):this.DiceState.face===3?this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(c=n+o*(e*40),a=i,l=t+o*(-s*40)):this.currentInteraction=="sensor"&&(c=t+s*40,a=n+-e*40,l=i):this.DiceState.face===4?this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(c=n+o*(e*40),a=i,l=t+o*(s*40)):this.currentInteraction=="sensor"&&(c=t+s*40,a=n+-e*40,l=i):this.DiceState.face===5?this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(c=n,a=t+o*(s*40),l=i+o*(-e*40)):this.currentInteraction=="sensor"&&(c=t+s*40,a=n,l=i+o*(-e*40)):this.DiceState.face===6&&(this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(c=n+o*(e*40),a=t+o*(s*40),l=i):this.currentInteraction=="sensor"&&(c=t+s*40,a=n+e*40,l=i)),this.currentInteraction=="mouse"||this.currentInteraction=="sensor")return"rotateX("+c+"deg) rotateY("+a+"deg) rotateZ("+l+"deg) translate3d( 0, 0, 0)";if(this.currentInteraction=="touch")return"rotateX("+-c+"deg) rotateY("+-a+"deg) rotateZ("+l+"deg) translate3d( 0, 0, 0)"}}},y=()=>{x(t=>({"54c6012e":t.diceBG_Shadow,"5b447d28":t.diceBG_BorderRadius,"6ae420be":t.diceBG_transform,ceb05970:t.cubeTransformSpinning,"14616daa":t.cubeTransformPerspective}))},S=f.setup;f.setup=S?(t,n)=>(y(),S(t,n)):y;const R=f,D=t=>(B("data-v-e5839bfa"),t=t(),b(),t),F=D(()=>r("h1",null,"Shake your phone!",-1)),L=D(()=>r("p",null,"Or touch the dice",-1)),q=[F,L],z={class:"my-8 overflow-hidden"},M={key:0,class:"front filler"},N={key:1,class:"back filler"},X={key:2,class:"top filler"},Y={key:3,class:"bottom filler"},A={key:4,class:"left filler"},O={key:5,class:"right filler"};function P(t,n,i,s,e,o){return d(),m("div",{onClick:n[0]||(n[0]=c=>o.handleClick()),class:"w-full h-full flex flex-col justify-center items-center"},[r("div",{class:u([e.DiceState.hasRolled?"":"enabled","helper"])},q,2),r("div",z,[r("div",null,"Dice face: "+g(e.DiceState.face),1),r("div",null,"Dice spinning: "+g(e.DiceState.spinning),1),r("div",null,"Use bg map: "+g(e.useBGmap),1),r("div",null,"currentInteraction: "+g(e.currentInteraction),1),r("div",null,"sensors: "+g(e.sensors),1)]),r("div",{class:u(["dice",{useBGmap:e.useBGmap}])},[r("div",{class:u([e.DiceState.spinning?"spin":"perspective","cube"])},[r("div",{class:u([e.DiceState.face===1||e.DiceState.spinning?"lightFacing":"","front"]),style:h(e.useBGmap?"":"background-image: url(images/"+e.dummyImages[1-1]+")")},null,6),e.useBGmap?(d(),m("div",M)):p("",!0),r("div",{class:u([e.DiceState.face===6||e.DiceState.spinning?"lightFacing":"","back"]),style:h(e.useBGmap?"":"background-image: url(images/"+e.dummyImages[6-1]+")")},null,6),e.useBGmap?(d(),m("div",N)):p("",!0),r("div",{class:u([e.DiceState.face===5||e.DiceState.spinning?"lightFacing":"","top"]),style:h(e.useBGmap?"":"background-image: url(images/"+e.dummyImages[5-1]+")")},null,6),e.useBGmap?(d(),m("div",X)):p("",!0),r("div",{class:u([e.DiceState.face===2||e.DiceState.spinning?"lightFacing":"","bottom"]),style:h(e.useBGmap?"":"background-image: url(images/"+e.dummyImages[2-1]+")")},null,6),e.useBGmap?(d(),m("div",Y)):p("",!0),r("div",{class:u([e.DiceState.face===3||e.DiceState.spinning?"lightFacing":"","left"]),style:h(e.useBGmap?"":"background-image: url(images/"+e.dummyImages[3-1]+")")},null,6),e.useBGmap?(d(),m("div",A)):p("",!0),r("div",{class:u([e.DiceState.face===4||e.DiceState.spinning?"lightFacing":"","right"]),style:h(e.useBGmap?"":"background-image: url(images/"+e.dummyImages[4-1]+")")},null,6),e.useBGmap?(d(),m("div",O)):p("",!0)],2)],2)])}const Z=v(R,[["render",P],["__scopeId","data-v-e5839bfa"]]);function H(){const t=w();return t._appConfig||(t._appConfig=k(j)),t._appConfig}const K={class:"w-full h-full flex flex-col justify-center items-center"},W=r("h1",{class:"text-3xl font-bold underline"},"Welcome to the homepage",-1),Q={__name:"index",setup(t){return H(),(n,i)=>{const s=V,e=Z;return d(),m("div",K,[W,_(s,null,{default:C(()=>[G(" This is an auto-imported component. ")]),_:1}),_(e)])}}};export{Q as default};
