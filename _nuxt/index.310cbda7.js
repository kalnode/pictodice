import{r as D,_ as f,e as S,f as y,o as h,a as m,b as u,h as p,t as d,F as v,i as I,j as g,k as w,u as E,p as b,l as x,m as P,q as T}from"./entry.58a64804.js";import{_ as M}from"./_plugin-vue_export-helper.c27b6911.js";const _=D("Motion",{android:()=>f(()=>import("./web.6cb65a35.js"),["./web.6cb65a35.js","./entry.58a64804.js","./entry.4edde5e4.css"],import.meta.url).then(e=>new e.MotionWeb),ios:()=>f(()=>import("./web.6cb65a35.js"),["./web.6cb65a35.js","./entry.58a64804.js","./entry.4edde5e4.css"],import.meta.url).then(e=>new e.MotionWeb),web:()=>f(()=>import("./web.6cb65a35.js"),["./web.6cb65a35.js","./entry.58a64804.js","./entry.4edde5e4.css"],import.meta.url).then(e=>new e.MotionWeb)});const R=e=>(b("data-v-44c729d7"),e=e(),x(),e),k={class:"w-full h-full flex flex-col justify-center items-center"},L={key:0,class:"flex justify-center space-x-2 items-center absolute top-4 mt-12 mx-4 z-50 pointer-events-auto bg-yellow-200 text-xs p-2 text-orange-800"},B=R(()=>u("div",null,"It's better with motion sensors enabled",-1)),C={key:1,class:"w-full my-8 overflow-hidden"},F={class:"whitespace-nowrap"},O={id:"dieInner",class:"cube"},j={name:"Dice",props:{},components:{},data(){return{showDevTools:!1,showSensorPermissionExperience:!1,useBGmap:!1,DiceState:{face:1,spinning:!1,accelerometer:[0,0],hasRolled:!1},Die:{faces:[{name:"front",orientation:[0,0,0],image:null},{name:"back",orientation:[90,0,0],image:null},{name:"top",orientation:[0,90,0],image:null},{name:"bottom",orientation:[0,-90,0],image:null},{name:"left",orientation:[-90,0,0],image:null},{name:"right",orientation:[-180,0,0],image:null}]},dummyImages:["dummy-400x400-BodyLanguage.jpg","dummy-400x400-CharlesBaudelaire.jpg","dummy-400x400-Eye.jpg","dummy-400x400-HappyBoy.jpg","dummy-400x400-Headphone.jpg","dummy-400x400-TShirt.jpg"],faceViews:[[0,0,0],[90,0,0],[0,90,0],[0,-90,0],[-90,0,0],[-180,0,0]],accelerationHandler:null,orientationHandler:null,currentInteraction:null,mouseTouchCoords:[1,1],sensors:{permission:!1,gyro:!1,orientation:!1,gyrocoords:{tilt:null,turn:null,rotate:null}},devOutput_motionEvent:null}},async mounted(){document.getElementById("dieParent").addEventListener("animationend",()=>{this.DiceState.spinning=!1}),document.addEventListener("keydown",o=>{this.handleKeyDown(o)}),document.addEventListener("mousemove",o=>{if(!this.currentInteraction!="sensor"){let t=(window.innerWidth/2-o.pageX)/-5,n=(window.innerHeight/2-o.pageY)/5;this.mouseTouchCoords=[t,n],this.currentInteraction="mouse"}}),document.addEventListener("touchmove",o=>{if(this.currentInteraction!="sensor"){let t=typeof o.originalEvent>"u"?o:o.originalEvent,n=t.touches[0]||t.changedTouches[0],s=n.pageX,i=n.pageY;this.mouseTouchCoords=[s,i],this.currentInteraction="touch"}}),await this.checkMotionPermission()},methods:{handleKeyDown(e){console.log("func handleKeyDown %O",e),e.code==="Space"&&this.getRandomDieFace()},handleClick(){console.log("func handleClick()"),this.getRandomDieFace()},getRandomDieFace(){this.rollToFace(Math.floor(Math.random()*6+1))},rollToFace(e){console.log("func roll(), face: %O",e),this.DiceState.face=e,this.DiceState.spinning=!0,this.DiceState.hasRolled=!0},async checkMotionPermission(){typeof DeviceOrientationEvent.requestPermission=="function"?await DeviceOrientationEvent.requestPermission().then(e=>{e=="granted"&&(this.showSensorPermissionExperience=!1,this.setMotionListeners())}).catch(e=>{console.log("Error getting sensor permission: %O",e),this.showSensorPermissionExperience=!0}):this.setMotionListeners()},async setMotionListeners(){this.orientationHandler=await _.addListener("orientation",e=>{if(console.log("Device orientation event: %O",e),this.devOutput_motionEvent={x:e.alpha.toFixed(2),y:e.beta.toFixed(2),z:e.gamma.toFixed(2)},this.currentInteraction="sensor",!this.DiceState.spinning){let o=e.beta;e.alpha;let t=e.gamma;const n=o/180,s=t/90;this.DiceState.accelerometer=[n,s]}}),this.accelerationHandler=await _.addListener("accel",e=>{console.log("Device acceleration event: %O",e),this.devOutput_motionEvent={x:e.rotationRate.alpha.toFixed(2),y:e.rotationRate.beta.toFixed(2),z:e.rotationRate.gamma.toFixed(2)},this.currentInteraction="sensor",(e.rotationRate.alpha>256||e.rotationRate.beta>256||e.rotationRate.gamma>256)&&!this.DiceState.spinning&&this.getRandomDieFace()})},stopMotionListeners(){},destroyListeners(){},setMotionListenersEXPERIMENTAL(){}},computed:{css_dieShadow_BorderRadius(){return this.DiceState.spinning?"50%":"10px"},css_dieShadow_Blur(){return this.DiceState.spinning?"blur(80px)":"blur(20px)"},css_dieShadow_Transform(){return"translateZ("+(this.DiceState.spinning?"-50":"0")+"px) translate3d( 0, 0, 0)"},css_cubeTransformSpinning(){const[e,o,t]=this.Die.faces[this.DiceState.face-1].orientation;return"rotateX("+e+"deg) rotateY("+o+"deg) rotateZ("+t+"deg) translate3d( 0, 0, 0)"},css_cubeTransformStanding(){const[e,o,t]=this.Die.faces[this.DiceState.face-1].orientation;let[n,s]=[0,0];this.currentInteraction=="sensor"?(n=this.DiceState.accelerometer[0],s=this.DiceState.accelerometer[1]):(this.currentInteraction=="mouse"||this.currentInteraction=="touch")&&(n=this.mouseTouchCoords[0],s=this.mouseTouchCoords[1]);let i=40,l=.002,r=0,a=0,c=0;if(this.DiceState.face===1?this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(a=e+l*(n*i),r=o+l*(s*i),c=t):this.currentInteraction=="sensor"&&(r=e+n*i,a=o+-s*i,c=t):this.DiceState.face===2?this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(a=e+l*(n*i),r=o,c=t+l*(s*i)):this.currentInteraction=="sensor"&&(r=e+n*i,a=o,c=t+s*i):this.DiceState.face===3?this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(r=o+l*(s*i),a=t,c=e+l*(-n*i)):this.currentInteraction=="sensor"&&(r=e+n*i,a=o+-s*i,c=t):this.DiceState.face===4?this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(r=o+l*(s*i),a=t,c=e+l*(n*i)):this.currentInteraction=="sensor"&&(r=e+n*i,a=o+-s*i,c=t):this.DiceState.face===5?this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(r=o,a=e+l*(n*i),c=t+l*(-s*i)):this.currentInteraction=="sensor"&&(r=e+n*40,a=o,c=t+l*(-s*i)):this.DiceState.face===6&&(this.currentInteraction=="mouse"||this.currentInteraction=="touch"?(r=o+l*(s*i),a=e+l*(n*i),c=t):this.currentInteraction=="sensor"&&(r=e+n*i,a=o+s*i,c=t)),this.currentInteraction=="mouse"||this.currentInteraction=="sensor")return"rotateX("+r+"deg) rotateY("+a+"deg) rotateZ("+c+"deg) translate3d( 0, 0, 0)";if(this.currentInteraction=="touch")return"rotateX("+-r+"deg) rotateY("+-a+"deg) rotateZ("+c+"deg) translate3d( 0, 0, 0)"}}},z=Object.assign(j,{setup(e){S(t=>({"599ca3e6":t.css_dieShadow_Blur,b0acff46:t.css_dieShadow_BorderRadius,"9fd16166":t.css_dieShadow_Transform,"58682be3":t.css_cubeTransformStanding}));const o=y();return(t,n)=>(h(),m("div",k,[t.showSensorPermissionExperience?(h(),m("div",L,[B,u("div",{onClick:n[0]||(n[0]=s=>t.checkMotionPermission()),class:"p-2 bg-orange-600 text-white cursor-pointer pointer-events-auto"},"Allow"),u("div",{onClick:n[1]||(n[1]=s=>t.showSensorPermissionExperience=!1),class:"test-xl font-bold p-2 rounded-full cursor-pointer pointer-events-auto"},"X")])):p("",!0),t.showDevTools?(h(),m("div",C,[u("div",null,d(t.DiceState.spinning),1),u("div",null,d(t.devOutput_motionEvent),1),u("div",null,"Dice face: "+d(t.DiceState.face),1),u("div",null,"currentInteraction: "+d(t.currentInteraction),1),u("div",null,"Dice face: "+d(t.DiceState.face),1),u("div",null,"Dice spinning: "+d(t.DiceState.spinning),1),u("div",null,"Use bg map: "+d(t.useBGmap),1),u("div",F,"sensors: "+d(t.sensors.gyrocoords),1)])):p("",!0),u("div",{id:"dieParent",ref:"dieParent",onClick:n[2]||(n[2]=s=>t.handleClick()),class:g(["die cursor-pointer",[t.DiceState.spinning?"spinning":t.DiceState.hasRolled?"standing":"",{useBGmap:t.useBGmap}]])},[u("div",O,[(h(!0),m(v,null,I(E(o).dice[0].images,(s,i)=>(h(),m("div",{key:"face-"+i,class:g([t.Die.faces[i].name,t.DiceState.face===i+1||t.DiceState.spinning?"lightFacing":""]),style:w(t.useBGmap?"":"background-image: url("+s+")")},null,6))),128))])],2)]))}}),V=M(z,[["__scopeId","data-v-44c729d7"]]),H={class:"w-full h-full flex justify-center items-center"},G={__name:"index",setup(e){return P("Pictodice"),(o,t)=>{const n=V;return h(),m("div",H,[T(n)])}}};export{G as default};
